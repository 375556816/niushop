<section class="ns-base-section">



    <div style="position:relative;margin:0;">
        <!-- 面包屑导航 -->
        <div class="breadcrumb-nav">
            <a href="http://niushop.com/index.php/admin">Niushop开源商城</a>
            <i class="fa fa-angle-right"></i>
            <a href="http://niushop.com/index.php/admin/goods/goodslist">商品</a>
            <i class="fa fa-angle-right"></i>
            <!-- 需要加跳转链接用这个：http://niushop.com/index.php/admin/goods/addgoods -->
            <a href="javascript:;" style="color:#999;">商品发布</a>
        </div>
        <!-- 三级导航菜单 -->


        <div class="right-side-operation">
            <ul>


                <!-- 					style="display:none;" style="display:block;" -->
                <li>
                    <a class="js-open-warmp-prompt" href="javascript:;" data-menu-desc=''><i class="fa fa-question-circle"></i>&nbsp;提示</a>
                    <div class="popover">
                        <div class="arrow"></div>
                        <div class="popover-content">
                            <div>
                                <h4>操作提示</h4>
                                <p>相关教程：<a href="http://bbs.niushop.com.cn/forum.php?mod=viewthread&tid=2302&extra=page%3D3" target="_blank">http://bbs.niushop.com.cn/forum.php?mod=viewthread&tid=2302&extra=page%3D3</a></p>
                                <hr/>
                                <h4>功能提示</h4>
                                <p class="function-prompts"></p>
                            </div>
                        </div>
                    </div>
                </li>

            </ul>
        </div>
    </div>

    <!-- 操作提示 -->

    <!-- 		 -->
    <div class="ns-warm-prompt" style="display:none;">
        <div class="alert alert-info">
            <button type="button" class="close">&times;</button>
            <h4>
                <!-- 					{1block name="alert_info"} -->
                <!-- 					<i class="fa fa-info-circle"></i> -->
                <!-- 					<span class="operating-hints">操作提示</span> -->
                <!-- 						 -->
                <!-- 						<span>相关教程：<a href="http://bbs.niushop.com.cn/forum.php?mod=viewthread&tid=2302&extra=page%3D3" target="_blank">http://bbs.niushop.com.cn/forum.php?mod=viewthread&tid=2302&extra=page%3D3</a></span> -->
                <!-- 						 -->
                <!-- 					{1/block} -->
            </h4>
        </div>
    </div>


    <div class="ns-main">

        <div class="space-10"></div>
        <div class="ncsc-form-goods">
            <nav class="goods-nav">
                <ul>
                    <li class="selected" data-c="block-basic-setting"><a href="javascript:;">基础设置</a></li>
                    <!-- 如果不是虚拟商品点卡才可编辑商品规格 -->
                    <li data-c="block-goods-type"><a href="javascript:;">商品属性</a></li>
                    <li data-c="block-goods-sku"><a href="javascript:;">商品规格</a></li>


                    <li data-c="block-photo-video-setting"><a href="javascript:;">媒体设置</a></li>
                    <li data-c="block-goods-detail-setting"><a href="javascript:;">商品详情</a></li>
                    <li data-c="block-template-setting"><a href="javascript:;">模板设置</a></li>
                </ul>
            </nav>
            <!-- 基础设置 -->
            <div class="block-basic-setting">
                <h4>商品类型</h4>
                <dl>
                    <dd class="goods_type_select">
									<span class="goods_type_item selected" data-goods-type="1">
						<p class="type_name">实物商品</p>
						<p class="type_desc">（物流发货）</p>
						<i class="selected-icon"></i>
						<input type="radio" name="goods_type" value="1" checked="checked">
					</span>
                    </dd>
                </dl>
                <h4>基础信息</h4>
                <dl>
                    <dt><i class="required">*</i>商品名称：</dt>
                    <dd>
                        <input class="productname input-common long" type="text" id="txtProductTitle" placeholder="请输入商品名称，不能超过60个字符"  oninput='if(value.length>60){value=value.slice(0,60);$(this).next().text("商品名称不能超过60个字符").show();}else{$(this).next().hide();}'/>
                        <span class="help-inline">请填写商品名称</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>商品分类：</dt>
                    <dd id="tbcNameCategory" data-flag="category" data-goods-id="0" cid="" data-attr-id="" cname="">
                        <span class="category-text"></span>
                        <button class="category-button">选择</button>
                        <span><label for="g_name" class="error"><i class="icon-exclamation-sign"></i>商品分类不能为空</label></span>
                        <span class="help-inline">请选择商品分类</span>
                    </dd>
                </dl>
                <dl>
                    <dt>扩展分类：</dt>
                    <dd id ="extend_name_category_box">
                        <div class="extend-name-category-box"></div>
                        <div class="clear">
                            <button class="select-button" onclick="addExtentCategoryBox();"><i class="fa fa-plus-square"></i>&nbsp;添加</button>
                        </div>
                    </dd>
                </dl>


                <dl class="js-virtual-goods-cloud-download-resources">
                    <dt>网盘地址：</dt>
                    <dd>
                        <input id="cloud_address" type="text" class="input-common long" placeholder="请输入网盘地址" />
                    </dd>
                </dl>

                <dl class="js-virtual-goods-cloud-download-resources">
                    <dt>网盘密码：</dt>
                    <dd>
                        <input id="cloud_password" type="text" class="input-common" placeholder="请输入网盘密码" />
                    </dd>
                </dl>

                <dl class="js-virtual-goods-site-directly-download-resources">
                    <dt>上传文件：</dt>
                    <dd>
                        <div class="upload-btn-common">
                            <div>
                                <input class="input-file" name="file_upload" id="uploadDownloadResources" type="file" onchange="imgUpload(this);" title="上传" only-type=".zip">
                                <input type="hidden" id="download_resources" value="" />
                            </div>
                            <input type="text" id="text_download_resources" class="input-common" readonly="readonly" value="" />
                            <em style="top:1px;">上传</em>
                        </div>
                        <p class="hint">上传附件类型必须是<i class="important-note">zip</i>格式</p>
                    </dd>
                </dl>

                <dl class="js-virtual-goods-site-directly-download-resources">
                    <dt>解压密码：</dt>
                    <dd>
                        <input id="unzip_password" type="text" class="input-common" placeholder="请输入解压密码" />
                    </dd>
                </dl>

                <dl class="js-virtual-goods-point-card-inventory">
                    <dt>卡密库存：</dt>
                    <dd>
                        <span>0件</span>
                    </dd>
                </dl>
                <dl class="js-virtual-goods-point-card-inventory">
                    <dt>添加卡密：</dt>
                    <dd>
                        <span style="font-weight: bold;color: #FF5722;">导入格式为卡号+空格+密码(可跟上附加内容)，一行一组，如AAAAA BBBBB</span><br/>
                        <textarea class="input-common long" id="card_password"></textarea>
                    </dd>
                </dl>
                <dl class="js-virtual-goods-type-block">
                    <dt>有效期/天：</dt>
                    <dd>
                        <input id="validity_period" type="text" placeholder="请输入有效期" class="input-common harf"><em class="unit">天</em>
                        <p class="hint notice">输入0表示不限制</p>
                    </dd>
                </dl>

                <dl class="js-virtual-goods-type-block">
                    <dt>限制使用次数：</dt>
                    <dd>
                        <span class="js-confine_use_number" style="color: #FF5722;font-weight: bold;">1次</span>
                    </dd>
                </dl>

                <dl>
                    <dt>商品促销语：</dt>
                    <dd>
                        <input class="productname input-common long" type="text" id="txtIntroduction" placeholder="请输入促销语，不能超过100个字符"  oninput='if(value.length>100){value=value.slice(0,100);$(this).next().text("促销语不能超过100个字符").show();}else{$(this).next().hide();}'/>
                        <span class="help-inline">请输入商品促销语，不能超过100个字符</span>
                    </dd>
                </dl>
                <dl>
                    <dt>关键词：</dt>
                    <dd>
                        <input class="productname input-common" type="text" id="txtKeyWords" placeholder="商品关键词用于SEO搜索"  oninput='if(value.length>40){value=value.slice(0,40);$(this).next().text("商品关键词不能超过40个字符").show();}'/>
                        <span class="help-inline">请输入商品促销语，不能超过40个字符</span>
                    </dd>
                </dl>
                <dl>
                    <dt>商品单位：</dt>
                    <dd>
                        <input class="productname input-common" type="text" id="goodsUnit" placeholder="请输入商品单位"  oninput='if(value.length>10){value=value.slice(0,10);$(this).next().text("商品单位不能超过10个字符").show();}'/>
                        <span class="help-inline">请输入商品单位，不能超过10个字符</span>
                    </dd>
                </dl>
                <dl>
                    <dt>商品标签：</dt>
                    <dd>
                        <div class="group-text-check-box">
                            <div class="controls product-category-position">
                                <span class="span-error" style="display:block;">暂无可选的商品标签</span>
                            </div>
                        </div>
                    </dd>
                </dl>
                <dl style="overflow: inherit;">
                    <dt>商品品牌：</dt>
                    <dd class="js-brand-block">
                        <div class="controls brand-controls">
                            <select id="brand_id" class="select-common-ajax">
                                <option value="0">请选择商品品牌</option>
                            </select>
                            <input type="text" id="selected_brand_name" style="padding:0;margin:0;opacity: 0;position: absolute;"/>
                            <p class="hint">可输入品牌名或品牌首字母来搜索品牌</p>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>供货商：</dt>
                    <dd>
                        <select id="supplierSelect" class="select-common">
                            <option value="0">请选择供货商</option>
                        </select>
                        <span class="help-inline">请选择供货商</span>
                    </dd>
                </dl>
                <dl>
                    <dt>基础销量：</dt>
                    <dd>
                        <input type="number" class="span1 input-common harf" id="BasicSales" placeholder="0"
                        /><em class="unit">件</em>
                        <span class="help-inline">基础销量必须是数字，且不能为负数</span>
                    </dd>
                </dl>
                <dl>
                    <dt>基础点击数：</dt>
                    <dd>
                        <input type="number" class="span1 input-common harf" id="BasicPraise" placeholder="0"
                        /><em class="unit">次</em>
                        <span class="help-inline">基础点击数必须是数字，且不能为负数</span>
                    </dd>
                </dl>
                <dl>
                    <dt>基础分享数：</dt>
                    <dd>
                        <input type="number" class="span1 input-common harf" id="BasicShare" placeholder="0"
                        /><em class="unit">次</em>
                        <span class="help-inline">基础分享数必须是数字，且不能为负数</span>
                    </dd>
                </dl>
                <dl>
                    <dt>商家编码：</dt>
                    <dd>
                        <input type="text" class="input-common" id="txtProductCodeA" placeholder="请输入商家编码" />
                        <span class="help-inline">请输入商家编码，不能超过40个字符</span>
                    </dd>
                </dl>
                <dl>
                    <dt>生产日期：</dt>
                    <dd>
                        <input type="text" class="input-common" id="production_date" onclick="WdatePicker()" >
                    </dd>
                </dl>
                <dl>
                    <dt>保质期天数：</dt>
                    <dd>
                        <input type="number" class="goods-stock input-common harf" id="shelf_life" value="0"
                        /><em class="unit">天</em>
                        <span class="help-inline">请输入保质期天数，必须是整数</span>
                    </dd>
                </dl>

                <dl >
                    <dt><i class="required">*</i>总库存：</dt>
                    <dd>
                        <input type="number" class="goods-stock input-common harf" id="txtProductCount" min="0" value="0"
                        /><em class="unit">件</em>
                        <span class="help-inline">请输入总库存数量，必须是大于0的整数</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>库存预警：</dt>
                    <dd>
                        <input type="number" class="goods-stock input-common harf" id="txtMinStockLaram" min="0" value="0"
                        /><em class="unit">件</em>
                        <span class="help-inline">请输入库存预警数，必须是大于0的整数</span>
                        <p class="hint">设置最低库存预警值。当库存低于预警值时商家中心商品列表页库存列红字提醒。<br>0为不预警。</p>
                    </dd>
                </dl>

                <dl>
                    <dt><i class="required">*</i>库存显示：</dt>
                    <dd>
                        <div class="controls">
                            <label class="radio inline normal">
                                <i class="radio-common selected">
                                    <input type="radio" name="stock" checked="checked" value="1" />
                                </i>
                                <span>是</span>
                            </label>
                            <label class="radio inline normal">
                                <i class="radio-common">
                                    <input type="radio" name="stock" value="0" />
                                </i>
                                <span>否</span>
                            </label>
                            <span class="help-inline">请选择库存是否显示</span>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>是否上架：</dt>
                    <dd>
                        <div class="controls">
                            <label class="radio inline normal">
                                <i class="radio-common selected">
                                    <input type="radio" name="shelves" value="1" checked="checked" />
                                </i>
                                <span>立刻上架</span>
                            </label>
                            <label class="radio inline normal">
                                <i class="radio-common">
                                    <input type="radio" name="shelves" value="0" />
                                </i>
                                <span>放入仓库</span>
                            </label>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>商品所在地：</dt>
                    <dd>
                        <select id="provinceSelect" class="select-common middle" onchange="getProvince(this,'#citySelect',-1)">
                            <option value="0">请选择省</option>
                        </select>
                        <select id="citySelect" class="select-common middle">
                            <option value="0">请选择市</option>
                        </select>
                    </dd>
                </dl>

                <h4>购买信息</h4>

                <dl>
                    <dt>市场价格：</dt>
                    <dd>
                        <input class="goods_price input-common harf" type="number" id="txtProductMarketPrice"  min="0" placeholder="0.00"
                        /><em class="unit">元</em>
                        <span class="help-inline">商品市场价格必须是数字，且不能为负数</span>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>销售价格：</dt>
                    <dd>
                        <input class="goods_price input-common harf" type="number" id="txtProductSalePrice"  min="0" placeholder="0.00"
                        /><em class="unit">元</em>
                        <span class="help-inline">商品销售价不能为空，且不能为负数</span>
                    </dd>
                </dl>
                <dl>
                    <dt>成本价格：</dt>
                    <dd>
                        <input class="goods_price input-common harf" type="number" id="txtProductCostPrice"  min="0" placeholder="0.00"
                        /><em class="unit">元</em>
                        <span class="help-inline">商品成本必须是数字，且不能为负数</span>
                    </dd>
                </dl>

                <dl style="display:none">
                    <dt>阶梯优惠：</dt>
                    <dd>
                        <p class="hint notice" >设置商品阶梯优惠，当购买数量达到所设数量时，商品单价 = 商品销售价 - 优惠价格</p>
                        <div class="ladder_preference_content">
                            <div>
                                <span class="label-title">数量</span><span class="label-title" style="margin-left: 30px;">优惠价格</span>
                            </div>
                            <div id="ladder_preference"></div>
                        </div>
                        <div class="add_ladder_preference"><i class="fa fa-plus" aria-hidden="true"></i></div>
                    </dd>
                </dl>
                <dl>
                    <dt><i class="required">*</i>运费：</dt>
                    <dd>
                        <div class="controls">

                            <label class="radio inline normal">
                                <i class="radio-common selected">
                                    <input type="radio" name="fare" value="0" checked="checked" />
                                </i>
                                <span>免邮</span>
                            </label>
                            <label class="radio inline normal">
                                <i class="radio-common">
                                    <input type="radio" name="fare" value="1" />
                                </i>
                                <span>买家承担运费</span>
                            </label>
                            <span class="help-inline">请选择运费类型</span>
                        </div>
                    </dd>
                </dl>

                <dl id="valuation-method" style="display: none">
                    <dt><i class="required">*</i>计价方式：</dt>
                    <dd>
                        <label class="radio inline normal">
                            <i class="radio-common selected">
                                <input type="radio" name="shipping_fee_type" value="3" checked="checked" />
                            </i>
                            <span>计件</span>
                        </label>
                        <label class="radio inline normal">
                            <i class="radio-common">
                                <input type="radio" name="shipping_fee_type" value="2" />
                            </i>
                            <span>体积</span>
                        </label>
                        <label class="radio inline normal">
                            <i class="radio-common">
                                <input type="radio" name="shipping_fee_type" value="1" />
                            </i>
                            <span>重量</span>
                        </label>
                    </dd>
                </dl>
                <dl id="commodity-weight" style="display: none">
                    <dt><i class="required">*</i>商品重量：</dt>
                    <dd>
                        <input type="number" class="goods-stock input-common harf" id="goods_weight" min="0" value="0"
                        /><em class="unit">公斤</em>
                        <span class="help-inline">商品重量必须大于0</span>
                    </dd>
                </dl>
                <dl id="commodity-volume" style="display: none">
                    <dt><i class="required">*</i>商品体积：</dt>
                    <dd>
                        <input type="number" class="goods-stock input-common harf" id="goods_volume" min="0" value="0"
                        /><em class="unit">立方米</em>
                        <span class="help-inline">商品体积必须大于0</span>
                    </dd>
                </dl>
                <dl id="express_Company" style="display: none;">
                    <dt>物流公司：</dt>
                    <dd>
                        <select id="expressCompany" class="select-common">
                            <option value="0">请选择物流公司</option>
                        </select>
                    </dd>
                </dl>

                <dl>
                    <dt>每人限购：</dt>
                    <dd>
                        <div class="controls">
                            <input type="number" class="input-mini input-common harf" min="0" placeholder="0" id="PurchaseSum"
                            /><em class="unit">件</em>
                            <p class="hint notice" >输入0表示不限购</p>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt>最少购买数：</dt>
                    <dd>
                        <div class="controls">
                            <input type="number" class="input-mini input-common harf" min="1" placeholder="0" id="minBuy" 					/><em class="unit">件</em>
                            <span class="help-inline">最少购买数必须是大于0的整数</span>
                        </div>
                    </dd>
                </dl>
                <!-- 预售设置 -->
                <div id="presell_set">
                    <h4 style="display:none">预售设置</h4>
                    <dl style="display:none">
                        <dt>是否支持预售：</dt>
                        <dd>
                            <label class="radio inline normal">
                                <i class="radio-common "><input type="radio" name="open_presell"  value="1" ></i>
                                <span>是</span>
                            </label>
                            <label class="radio inline normal">
                                <i class="radio-common selected">
                                    <input type="radio" name="open_presell" value="0" checked="checked">
                                </i>
                                <span>否</span>
                            </label>
                        </dd>


                    </dl>
                    <dl class="presell hide">
                        <dt>预售金额：</dt>
                        <dd>
                            <input class="goods_price input-common harf" type="number" id="presell_price" min="0" placeholder="0.00" value=""><em class="add-on">元</em>
                            <span class="help-inline">预售金额必须是数字，且不能为负数</span>
                        </dd>

                    </dl>
                    <dl class="presell hide">
                        <dt>预售发货方式：</dt>
                        <dd>
                            <label class="radio inline normal">
                                <i class="radio-common "><input type="radio" name="presell_delivery_type"  value="1" ></i>
                                <span>按照预售发货时间</span>
                            </label>
                            <label class="radio inline normal">
                                <i class="radio-common selected">
                                    <input type="radio" name="presell_delivery_type" value="2" >
                                </i>
                                <span>按照预售发货天数</span>
                            </label>
                        </dd>

                    </dl>
                    <dl class="presell hide">
                        <dt>预售发货时间：</dt>
                        <dd>
                            <input type="text" class="input-common" id="presell_time" value="" onclick="WdatePicker({dateFmt: 'yyyy-MM-dd HH:mm:ss',minDate: '%y-%M-#{%d+1}' })">&nbsp;开始发货
                        </dd>
                    </dl>
                    <dl class="presell hide">
                        <dt>预售发货时间：</dt>
                        <dd>
                            付款成功&nbsp;<input type="number" value="" class="span1 input-common short" id="presell_day" placeholder="0">&nbsp;天后发货
                        </dd>
                    </dl>
                </div>
                <h4>积分设置</h4>
                <dl id="integral_balance">
                    <dt>最大可使用积分：</dt>
                    <dd>
                        <input type="number" class="input-common harf" id="max_use_point" value="" onchange="integrationChange(this);"
                        /><em class="unit">分</em>
                        <p class="hint">设置购买时积分抵现最大可使用积分数，0为不可使用 </span></p>
                    </dd>
                </dl>
                <dl>
                    <dt>积分兑换设置：</dt>
                    <dd>
                        <label class="radio inline normal">
                            <i class="radio-common selected">
                                <input type="radio" name="integralSelect" checked value="0">
                            </i>
                            <span>非积分兑换</span>
                        </label>
                        <label class="radio inline normal">
                            <i class="radio-common ">
                                <input type="radio" name="integralSelect"  value="1">
                            </i>
                            <span>积分加现金购买</span>
                        </label>
                        <label class="radio inline normal">
                            <i class="radio-common ">
                                <input type="radio" name="integralSelect"  value="2">
                            </i>
                            <span>积分兑换或直接购买</span>
                        </label>
                        <label class="radio inline normal">
                            <i class="radio-common ">
                                <input type="radio" name="integralSelect"  value="3">
                            </i>
                            <span>只支持积分兑换</span>
                        </label>
                    </dd>
                </dl>
                <dl>
                    <dt>兑换所需积分：</dt>
                    <dd>
                        <input type="number" class="input-common harf" id="integration_available_use" value="0" onchange="integrationChange(this);"
                        /><em class="unit">分</em>
                        <span class="help-inline">请设置积分</span>
                    </dd>
                </dl>
                <dl>
                    <dt>购买可赠送：</dt>
                    <dd>
                        <div class="controls">
                            <input id="integration_available_give" class="input-mini input-common harf" placeholder="0" min="0" type="number" onchange="integrationChange(this);" value="0"
                            /><em class="unit">分</em>
                        </div>
                    </dd>
                </dl>
            </div>

            <!-- 商品规格 -->
            <div class="block-goods-sku">
                <nav >
                    <button class="btn-common-white js-open-edit-sku-popup">编辑规格</button>
                    <button class="btn-common-white js-clear-goods-sku">清空规格</button>
                </nav>
                <div style="padding:10px;line-height: 30px;display: none;">
                    <table class="goods-sku js-goods-sku"></table>
                </div>

                <div class="volume-set-sku-info">
                    <span>批量设置：</span>
                    <a href="javascript:;" data-tag="sku-price">销售价格</a>
                    <a href="javascript:;" data-tag="market-price">市场价格</a>
                    <a href="javascript:;" data-tag="cost-price">成本价格</a>
                    <a href="javascript:;" data-tag="stock-num">库存</a>
                    <input type="text" class="input-common middle" />
                    <button class="btn-common">确定</button>
                    <button class="btn-common-cancle">取消</button>
                </div>

                <div class="goods-sku-list">
                    <table class="table-class">
                        <colgroup>
                            <col width="50%">
                            <col width="10%">
                            <col width="10%">
                            <col width="10%">
                            <col width="10%">
                            <col width="10%">
                        </colgroup>
                        <thead>
                        <tr>
                            <th align="left">商品规格</th>
                            <th>
                                <span>销售价格</span>
                                <!-- 							<input type="text" class="input-common short" /> -->
                                <!-- 							<a href="javascript:;" style="float:right;">编辑</a> -->
                            </th>
                            <th>
                                <span>市场价格</span>
                                <!-- 							<a href="javascript:;" style="float:right;">编辑</a> -->
                            </th>
                            <th>
                                <span>成本价格</span>
                                <!-- 							<a href="javascript:;" style="float:right;">编辑</a> -->
                            </th>
                            <th>
                                <span>库存</span>
                                <!-- 							<a href="javascript:;" style="float:right;">编辑</a> -->
                            </th>
                            <th>
                                <span>商家编码</span>
                                <!-- 							<a href="javascript:;" style="float:right;">编辑</a> -->
                            </th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

            </div>

            <div class="block-goods-type">

                <h4>基础信息</h4>

                <dl>
                    <dt>商品类型：</dt>
                    <dd>
                        <select id="goodsType" class="select-common">
                            <option value="0">请选择商品类型</option>
                            <option value="1">手机</option>
                        </select>
                        <span class="help-inline">请选择商品类型</span>
                    </dd>
                </dl>
                <h4 style="display:none;" class="js-goods-attribute-block">商品属性：</h4>
                <div class="goods-sku-attribute-block js-goods-attribute-block">
                    <table class="goods-sku-attribute js-goods-sku-attribute"></table>
                </div>
            </div>

            <!-- 图片视频设置 -->
            <div class="block-photo-video-setting">

                <div class="goods-photos">
                    <h4>商品图片</h4>
                    <dl>
                        <dt>图片上传：</dt>
                        <dd>
                            <!-- 			（第一张图片将作为商品主图，支持同时上传多张图片,多张图片之间可随意调整位置；支持jpg、gif、png格式上传或从图片空间中选择，建议使用尺寸800x800像素以上、大小不超过1M的正方形图片，上传后的图片将会自动保存在图片空间的默认分类中。） -->

                            <div id="goods_picture_box" class="controls">
                                <div class="goodspic-uplaod">
                                    <div class='img-box' style="min-height:160px;">
                                        <div class="upload-thumb" id="default_uploadimg">
                                            <img src="/admin/images/album/default_goods_image_240.gif">
                                        </div>
                                    </div>
                                    <div class="clear"></div>
                                    <span class="img-error">最少需要一张图片作为商品主图</span>
                                    <p class="hint">第一张图片将作为商品主图,支持同时上传多张图片,多张图片之间可随意调整位置；支持jpg、gif、png格式上传或从图片空间中选择，建议使用尺寸800x800像素以上、大小不超过1M的正方形图片，上传后的图片将会自动保存在图片空间的默认分类中。</p>
                                    <div class="handle" style="margin-top: 5px;">
                                        <div class="ncsc-upload-btn" style="margin-left:0;">
                                            <a href="javascript:void(0);">
										<span>
											<input style="cursor:pointer;font-size:0;" type="file" id="fileupload" hidefocus="true" class="input-file" name="file_upload"multiple="multiple" />
										</span>
                                                <p>图片上传</p>
                                            </a>
                                        </div>
                                        <a class="ncsc-btn mt5" id="img_box" nctype="show_image" href="javascript:void(0);">从图片空间选择</a>
                                    </div>
                                </div>
                            </div>
                            <span class="help-inline">最少需要一张图片作为商品主图</span>
                        </dd>
                    </dl>
                </div>

                <div class="goods-video">
                    <h4>展示视频</h4>
                    <dl>
                        <dt>视频上传：</dt>
                        <dd style="padding:0;">
                            <div class="goodspic-uplaod" style="overflow: hidden;position:relative;">

                                <div class="video-thumb">
                                    <video id="my-video" class="video-js vjs-big-play-centered" controls poster="/static/blue/img/goods_video_upload_bg.png" preload="auto">
                                        <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that</p>
                                    </video>
                                    <span class="del-video hide" onclick="del_video()"></span>
                                </div>
                                <input class="input-file" name="file_upload" id="videoupload" type="file" onchange="fileUpload_video(this);" title="视频上传" style="position: absolute;left: 0;width: 290px;height: 140px;opacity: 0;cursor: pointer;z-index:10;" />
                            </div>
                        </dd>
                    </dl>

                    <dl>
                        <dt>输入网址：</dt>
                        <dd>
                            <input type="text" id="video_url" class="input-common" style="width: 290px !important;" placeholder="在此输入外链视频地址"  />
                            <span style="display: block;margin-top: 5px;">注意事项：</span>
                            <ul style="color:#FF6600;">
                                <li>1、检查upload文件夹是否有读写权限。</li>
                                <li>2、PHP默认上传限制为2MB，需要在php.ini配置文件中修改“post_max_size”和“upload_max_filesize”的大小。</li>
                                <li>3、视频支持手动输入外链视频地址或者上传本地视频文件</li>
                                <li>4、必须上传.mp4视频格式</li>
                                <li>5、视频文件大小不能超过500MB</li>
                            </ul>
                        </dd>
                    </dl>
                </div>

                <div class="goods-sku-picture">
                    <h4>规格图片</h4>
                    <dl class="sku-picture-dl" >
                        <dt>规格名列表：</dt>
                        <dd>
                            <div class="sku-picture-div"></div>
                        </dd>
                    </dl>
                    <dl class="sku-picture-dl-box">
                        <dt>规格值列表：</dt>
                        <dd>
                            <div class="sku-picture-box"></div>
                        </dd>
                    </dl>
                </div>
                <style>
                    .upload-thumb{display:block !important;float:left;width:147px !important;height:147px !important;position:relative;border:1px solid #e5e5e5;}
                    .upload-thumb img{width:100%;height:100%;}
                    .img-box, .sku-img-box{overflow:hidden;}
                    .off-box, .sku-off-box{position:absolute;width:18px;height:18px;right:0;top:0;line-height: 18px;background-color:#FFF;cursor:pointer;text-align: center;}
                    .black-bg{position:absolute;right:0;top:0;left:0;bottom:0;background-color:rgba(0,0,0,0.3);}
                    .img-error{color:red;height:25px;line-height:25px;display:none;}
                </style>
                <script src="/admin/js/drag-arrange.js" type="text/javascript" charset="utf-8"></script>
                <script src="/static/js/ajax_file_upload.js" type="text/javascript"></script>
                <script type="text/javascript" src="/static/js/jquery.ui.widget.js" charset="utf-8"></script>
                <script type="text/javascript" src="/static/js/jquery.fileupload.js" charset="utf-8"></script>
                <input type="hidden" id="album_id" value="30"/>
                <script type="text/javascript">
                    var dataAlbum;
                    $(function() {
                        //给图片更换位置事件
                        $('.draggable-element').arrangeable();

                        var album_id = $("#album_id").val();
                        dataAlbum = {
                            "album_id" : album_id,
                            "type" : "1,2,3,4",
                            'file_path' : UPLOADGOODS
                        };

                        // ajax 上传图片
                        var upload_num = 0; // 上传图片成功数量
                        $('#fileupload').fileupload({
                            url: "http://niushop.com/index.php/wap/upload/photoalbumupload",
                            dataType: 'json',
                            formData:dataAlbum,
                            add: function (e,data) {
                                $("#goods_picture_box .img-error").hide();
                                $("#goods_picture_box #default_uploadimg").remove();
                                //显示上传图片框
                                var html = "";
                                $.each(data.files, function (index, file) {
                                    html +='<div class="upload-thumb draggable-element"  nstype="' + file.name + '">';
                                    html +='<img nstype="goods_image" src="/admin/images/album/uoload_ing.gif">';
                                    html +='<input type="hidden" class="upload_img_id" nstype="goods_image" />';
                                    html +='<div class="black-bg hide">';
                                    html +='<div class="off-box">&times;</div>';
                                    html +='</div>';
                                    html +='</div>';
                                });
                                $(html).appendTo('#goods_picture_box .img-box');
                                //模块可拖动事件
                                $('#goods_picture_box .draggable-element').arrangeable();
                                data.submit();
                            },
                            done: function (e,data) {
                                var param = data.result;
                                $this = $('#goods_picture_box div[nstype="' + param.origin_file_name + '"]');
                                if(param.state > 0){
                                    $this.removeAttr("nstype");
                                    $this.children("img").attr("src",__IMG(param.file_name));
                                    $this.children("input[type='hidden']").val(param.file_id);
                                }else{
                                    $this.remove();
                                    if($("#goods_picture_box .img-box .upload-thumb").length == 0){
                                        var img_html ='<div class="upload-thumb" id="default_uploadimg">';
                                        img_html +='<img src="/admin/images/album/default_goods_image_240.gif">';
                                        img_html +='</div>';
                                        $("#goods_picture_box .img-box").append(img_html);
                                    }
                                    $("#goods_picture_box .img-error").html("请检查您的上传参数配置或上传的文件是否有误，<a href='http://niushop.com/index.php/admin/config/uploadtype' target='_blank' style='text-decoration: underline;'>去设置</a>").show();
                                }
                            }
                        });

                        //图片幕布出现
                        $(".draggable-element").live('mouseenter',function(){
                            $(this).children(".black-bg").show();
                        });

                        //图片幕布消失
                        $(".draggable-element").live('mouseleave',function(){
                            $(this).children(".black-bg").hide();
                        });

                        //sku图片幕布出现
                        $(".sku-draggable-element").live('mouseenter',function(){
                            $(this).children(".black-bg").show();
                        });

                        //sku图片幕布消失
                        $(".sku-draggable-element").live('mouseleave',function(){
                            $(this).children(".black-bg").hide();
                        });

                        //删除页面图片元素
                        $(".off-box").live('click',function(){
                            if($(".img-box .upload-thumb").length == 1){
                                var html = "";
                                html +='<div class="upload-thumb" id="default_uploadimg">';
                                html +='<img nstype="goods_image" src="/admin/images/album/default_goods_image_240.gif">';
                                html +='<input type="hidden" name="image_path" id="image_path" nstype="goods_image" value="">';
                                html +='</div>';
                                $(html).appendTo('.img-box');
                            }
                            $(this).parent().parent().remove();
                        });

                        $(".sku-off-box").live('click',function(){
                            if($(this).parent().parent().parent().find(".sku-img-box .upload-thumb").length == 1){
                                var html = "";
                                html +='<div class="upload-thumb" id="default_uploadimg">';
                                html +='<img nstype="goods_image" src="/admin/images/album/default_goods_image_240.gif">';
                                html +='<input type="hidden" name="image_path" id="image_path" nstype="goods_image" value="">';
                                html +='</div>';
                                $(html).appendTo('.sku-img-box');
                            }
                            $(this).parent().parent().remove();
                        });

                    });

                    function img_upload(){

                    }

                    //sku图片上传
                    function file_upload(obj){
                        var spec_id = $(obj).attr("spec_id");
                        var spec_value_id = $(obj).attr("spec_value_id");
                        $('.sku-draggable-element'+spec_id+'-'+spec_value_id).arrangeable();
                        //sku图片上传
                        $(obj).fileupload({
                            url: "http://niushop.com/index.php/wap/upload/photoalbumupload",
                            dataType: 'json',
                            formData:dataAlbum,
                            add: function (e,data) {
                                var box_obj = $(this).parent().parent().parent().parent().parent().parent().parent().parent();
                                var spec_id = box_obj.attr("spec_id");
                                var spec_value_id = box_obj.attr("spec_value_id");
                                box_obj.find(".img-error").hide();
                                box_obj.find("#sku_default_uploadimg").remove();
                                //显示上传图片框
                                var html = "";
                                $.each(data.files, function (index, file) {
                                    html +='<div class="upload-thumb sku-draggable-element'+ spec_id +'-'+ spec_value_id +' sku-draggable-element"  nstype="' + file.name + '">';
                                    html +='<img nstype="goods_image" src="/admin/images/album/uoload_ing.gif">';
                                    html +='<input type="hidden"  class="sku_upload_img_id" nstype="goods_image" spec_id="" spec_value_id="" value="">';
                                    html +='<div class="black-bg hide">';
                                    html +='<div class="sku-off-box">&times;</div>';
                                    html +='</div>';
                                    html +='</div>';
                                });
                                box_obj.find('.sku-img-box').append(html);
                                //模块可拖动事件
                                $('.sku-draggable-element'+spec_id+'-'+ spec_value_id ).arrangeable();
                                data.submit();
                            },
                            done: function (e,data) {
                                var box_obj = $(this).parent().parent().parent().parent().parent().parent().parent().parent();
                                var spec_id = box_obj.attr("spec_id");
                                var spec_value_id = box_obj.attr("spec_value_id");
                                var param = data.result;
                                $this = box_obj.find('div[nstype="' + param.origin_file_name + '"]');
                                if(param.state > 0){
                                    $this.removeAttr("nstype");
                                    $this.children("img").attr("src",__IMG(param.file_name));
                                    $this.children("input[type='hidden']").val(param.file_id);
                                    $this.children("input[type='hidden']").attr("spec_id", spec_id);
                                    $this.children("input[type='hidden']").attr("spec_value_id", spec_value_id);
                                    //将上传的规格图片记录
                                    for(var i = 0; i < $sku_goods_picture.length ; i ++ ){
                                        if($sku_goods_picture[i].spec_id == spec_id && $sku_goods_picture[i].spec_value_id == spec_value_id){
                                            $sku_goods_picture[i]["sku_picture_query"].push({"pic_id":param.file_id, "pic_cover_mid":param.file_name});
                                        }
                                    }
                                }else{
                                    $this.remove();
                                    if(box_obj.find(".upload-thumb").length == 0){
                                        var img_html ='<div class="upload-thumb" id="default_uploadimg">';
                                        img_html +='<img src="/admin/images/album/default_goods_image_240.gif">';
                                        img_html +='</div>';
                                        box_obj.find(".sku-img-box").append(img_html);
                                    }
                                    box_obj.find(".img-error").html("请检查您的上传参数配置或上传的文件是否有误，<a href='http://niushop.com/index.php/admin/config/uploadtype' target='_blank' style='text-decoration: underline;'>去设置</a>").show();
                                }
                            }
                        });
                    }
                </script>
            </div>

            <!-- 详情设置 -->
            <div class="block-goods-detail-setting">

                <div class="controls" id="discripContainer">
                    <textarea id="tareaProductDiscrip" name="discripArea" style="height: 500px; width: 800px; display: none;"></textarea>
                    <script id="editor" type="text/plain" style="width: 100%; height: 500px;"></script>
                    <span class="help-inline">请填写商品描述</span>
                        </div>
                        </div>

                        <div class="block-template-setting">

                        <!-- 模板设置 -->
                        <h4>模板设置</h4>
                        <dl>
                        <dt>电脑端：</dt>
                    <dd>
                    template/shop//Goods/&nbsp;<input type="text" class="input-common harf" name="" id="pc_custom_template" value="" style="width: 80px;" onkeyup="value=value.replace(/[^\w\.\/]/ig,'')">&nbsp;.html
                    <p class="hint">用户自定义模板必须存放在template/shop//Goods/下，模板名只能由英文组成</p>
                        </dd>
                        </dl>
                        <dl>
                        <dt>手机端：</dt>
                    <dd>
                    template/wap//Goods/&nbsp;<input type="text" class="input-common harf" name="" id="wap_custom_template" value="" style="width: 80px;" onkeyup="value=value.replace(/[^\w\.\/]/ig,'')">&nbsp;.html
                    <p class="hint">用户自定义模板必须存放在template/wap//Goods/下，模板名只能由英文组成</p>
                        </dd>
                        </dl>
                        </div>

                        <div class="js-mask-category" style="position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; right: 0px; bottom: 0px; z-index: 90; display: none; background: rgba(0, 0, 0, 0);"></div>

                        </div>

                        <div class="edit-sku-popup-mask-layer"></div>
                        <div class="edit-sku-popup">
                        <header>
                        <h3>选择规格</h3>
                        <span>×</span>
                    </header>
                    <div class="edit-sku-popup-body">
                        <aside>
                        <p>选择规格 [可多选]</p>
                        <div class="js-attr-block">
                        <select id="search_attr_id" class="select-common attr-search" onchange="getAttrSearchSelected(this);">
                        <option value="0" selected="selected">全部</option>
                        <option value="1">手机</option>
                        </select>
                        </div>
                        <!-- 原始规格 -->
                        <div class="original-sku">
                        <ul class="original-sku-list">
                        <li class="add-sku" style="display: none;"></li>
                        </ul>
                        </div>
                        <p class="title">当前已选规格</p>
                        <!-- 已选规格 -->
                        <div class="current-selected-sku">
                        <ul class="js-sku-list-popup">
                        <li class="add-sku">
                        <input type="text" class="input-common" placeholder="输入新规格名称">
                        <i class="fa fa-plus"></i>
                        <strong>添加新规格</strong>
                        </li>
                        </ul>
                        </div>
                        </aside>
                        <article>
                        <p>选择规格值 [可多选]</p>
                        <div class="sku-value">

                        <p class="empty-info">请选择左侧规格列表</p>

                        <div class="sku-value-list">
                        <label>
                        <i class="checkbox-common">
                        <input class="margin-small-right" id="checkAll" type="checkbox">
                        </i>
                        <span>全选</span>
                        </label>
                        <div class="add-sku-value-input">
                        <input type="text" class="input-common" placeholder="输入规格值名称(回车保存)" />
                        </div>
                        <ul></ul>
                        </div>

                        </div>
                        <div class="sku-display-mode">
                        <header>
                        <label>规格值展示方式</label>
                        <span>指定规格值在前台的展示方式</span>
                        </header>
                        <p class="empty-info">请选择上方的规格值</p>
                        <nav>
                        <ul>
                        <li data-spec-show-type="1">
                        <label class="line-label">
                        <span>文字（编辑不会改变原始规格）</span>
                    </label>
                    </li>
                    <li data-spec-show-type="2">
                        <label class="line-label">
                        <i class="radio-common">
                        <input type="radio" name="show_type" id="show_type2" value="2">
                        </i>
                        <span>颜色</span>
                        </label>
                        </li>
                        <li data-spec-show-type="3">
                        <label class="line-label">
                        <i class="radio-common">
                        <input type="radio" name="show_type" id="show_type3" value="3">
                        </i>
                        <span>图片</span>
                        </label>
                        </li>
                        </ul>
                        </nav>
                        <ul></ul>
                        </div>
                        </article>
                        </div>

                        <footer>
                        <span class="box-spec-bottom">注意：改变规格会删除现有的有的商品规格数据，并生成新的规格数据。</span>
                    <button class="btn-common btn-big btn-top">生成</button>
                        <button class="btn-common-cancle btn-big btn-bottom">取消</button>
                        </footer>
                        </div>

                        <div class="point-card-inventory-management-popup">
                        <div class="point-card-inventory-management-body">
                        </div>
                        <footer></footer>
                        </div>

                        <div style="height: 50px;" class="h50"></div>
                        <div class="btn-submit ncsc-form-goods" style="text-align: left;">
                        <dl>
                        <dt></dt>
                        <dd style="padding: 0;">
                        <button class="btn-common" id="btnSave" type="button" onClick="SubmitProductInfo(0,'http://niushop.com/index.php/admin','http://niushop.com/index.php')">保存</button>
                        <button class="btn-common" id="btnSavePreview" type="button" onClick="SubmitProductInfo(1,'http://niushop.com/index.php/admin','http://niushop.com/index.php')">保存并预览</button>
                        </dd>
                        </dl>
                        </div>
                        <input type="hidden" id="goodsId" value="0" />
                        <input type="hidden" id="shop_type" value="2" />
                        <input type="hidden" id="virtual_goods_type_id" value="0" />
                        <input type="hidden" id="hidQRcode" value="1" />
                        <input type="hidden" id="hidden_qrcode" />
                        <input type="hidden" id="hidden_sort" value="0" />
                        <input type="hidden" id="hidden_goods_brand_id" value="0" />
                        <input type="hidden" id="hidden_goods_brand_name" />
                        <script>
                    var sku_list = null;
                    </script>
                    <script type="text/javascript">
                        //扩展分类个数
                        var extent_sort = 0;
                        //当前可搜索的下拉选项框
                        var curr_searchable_select = null;
                        $(function(){

                            //将分页克隆到点卡库存列表弹出框中
                            $(".point-card-inventory-management-popup footer").append($("#turn-ul").clone());
                            $(".ns-main>#turn-ul").remove();

                            //可搜索的商品品牌下拉选项框
                            curr_searchable_select = $('#brand_id').searchableSelect();
                            getGoodsBrandList();

                            if(parseInt("") > 0){
                                extent_sort = parseInt("");
                            }

                            if(parseInt($("#goodsId").val()) > 0){
                                initProvince("#provinceSelect",function(){
                                    //编辑商品时，加载数据
                                    $("#provinceSelect").find("option[value='"+province_id+"']").attr("selected",true);
                                    $('#provinceSelect').selectric();
                                    getProvince("#provinceSelect",'#citySelect',city_id);
                                });

                            }else{
                                initProvince("#provinceSelect");
                            }

                            //右键复制选择的相册
                            var menu = new BootstrapMenu('.searchable-select-holder', {
                                actions: [{
                                    name: '复制',
                                    onClick: function() {
                                        var brand_name = $('#brand_id option:selected').text();
                                        $("#selected_brand_name").val(brand_name);
                                        var copy_content = document.getElementById('selected_brand_name');
                                        copy_content.select();
                                        document.execCommand("Copy");
                                        showTip("复制成功",'success');
                                    }
                                }]
                            });
                        })

                        function PopUpCallBack(id, src, upload_type, spec_id, spec_value_id) {

                            var idArr, srcArr;
                            if (id.indexOf(",")) {
                                idArr = id.split(',');
                                srcArr = src.split(',');
                            } else {
                                idArr = new Array(id);
                                srcArr = new Array(src);
                            }
                            switch(speciFicationsFlag){
                                case 0:
                                    //商品主图
                                    if(srcArr.length>=1){
                                        html = "";
                                        for(var i=0;i<srcArr.length;i++){
                                            if(upload_type == 2){
                                                html +='<div class="upload-thumb sku-draggable-element'+ spec_id +'-'+ spec_value_id +' sku-draggable-element">';
                                                html +='<img src="'+ __IMG(srcArr[i]) +'">';
                                                html +='<input type="hidden" class="sku_upload_img_id" spec_id="'+ spec_id +'" spec_value_id="'+ spec_value_id +'" value="'+idArr[i]+'">';
                                                html +='<div class="black-bg hide">';
                                                html +='<div class="sku-off-box">&times;</div>';
                                                html +='</div>';
                                                html +='</div>';
                                                //将规格图片记录存入临时数组
                                                var pic_id = idArr[i];
                                                var pic_cover_mid = srcArr[i];
                                                for(var t = 0; t < $sku_goods_picture.length ; t ++ ){
                                                    if($sku_goods_picture[t].spec_id == spec_id && $sku_goods_picture[t].spec_value_id == spec_value_id){
                                                        $sku_goods_picture[t]["sku_picture_query"].push({"pic_id":pic_id, "pic_cover_mid":pic_cover_mid});
                                                    }
                                                }
                                            }else if(upload_type == 1){
                                                html +='<div class="upload-thumb draggable-element">';
                                                html +='<img  src="'+__IMG(srcArr[i])+'">';
                                                html +='<input type="hidden" class="upload_img_id" value="'+idArr[i]+'">';
                                                html +='<div class="black-bg hide">';
                                                html +='<div class="off-box">&times;</div>';
                                                html +='</div>';
                                                html +='</div>';
                                            }else{
                                                var span_obj = $(".js-goods-sku").find("span[data-spec-id='"+ spec_id +"'][data-spec-value-id='"+ spec_value_id +"']");
                                                span_obj.next().next().find("input").val(idArr[i]);
                                                span_obj.next().next().find("img").attr("src",__IMG(srcArr[i]));
                                                //规格spec图片返回并改变specObj对象
                                                var spec = {
                                                    flag : span_obj.hasClass("selected"),
                                                    spec_id : span_obj.attr("data-spec-id"),
                                                    spec_name : span_obj.attr("data-spec-name"),
                                                    spec_value_id : span_obj.attr("data-spec-value-id"),
                                                    spec_value_data : srcArr[i]
                                                };
                                                editSpecValueData(spec);//修改图片对应的修改SKU数据

                                                var upload_img_path = srcArr[i];
                                                var curr_img_obj = $(".sku-display-mode li[data-spec-value-id='"+spec_value_id+"'][data-spec-show-type='3']");
                                                curr_img_obj.find('#preview_sku_value_'+spec_value_id).attr("src",STATIC + "/blue/img/upload-common-select-blue.png").attr("data-src",__IMG(upload_img_path));
                                                curr_img_obj.find("em").text("修改图片");
                                                var curr_sku = $(".js-sku-list-popup li[data-spec-id='"+spec_id+"']");
                                                var spec_value = eval(curr_sku.attr("data-spec-value-json"));
                                                if(spec_value != null){
                                                    for(var i=0;i<spec_value.length;i++){
                                                        if(spec_value_id == spec_value[i].spec_value_id){
                                                            spec_value[i].spec_value_data = upload_img_path;
                                                        }
                                                    }
                                                    curr_sku.attr("data-spec-value-json",JSON.stringify(spec_value));
                                                }

                                            }
                                        }
                                        if(upload_type == 2){
                                            $(".sku-img-box[spec_id='"+ spec_id +"'][spec_value_id='"+ spec_value_id +"'] #sku_default_uploadimg").remove();
                                            $(".sku-img-box[spec_id='"+ spec_id +"'][spec_value_id='"+ spec_value_id +"']").append(html);
                                            $('.sku-draggable-element'+spec_id+'-'+ spec_value_id ).arrangeable();
                                        }else if(upload_type == 1){
                                            $("#default_uploadimg").remove();
                                            $(html).appendTo('.img-box');
                                            $('.draggable-element').arrangeable();
                                        }
                                    }
                                    break;
                                case 1:
                                    //商品详情
                                    for (var i = 0; i < srcArr.length; i++) {
                                        var description = "<img src='"+__IMG(srcArr[i])+"' />";
                                        //在光标后添加内容
                                        UE.getEditor('editor').focus();
                                        UE.getEditor('editor').execCommand('inserthtml',description);
                                    }
                                    break;
                            }
                        }

                        //设置商品详情的图片
                        function setUeditorImg(upload_path) {
                            speciFicationsFlag = 1;
                            OpenPricureDialog("PopPicure", ADMINMAIN,30,3,0,0,upload_path);
                        }

                        //查询商品品牌列表
                        function getGoodsBrandList(brand_name,search_name){
                            var page_index = 1;
                            var page_size = 20;
                            $.ajax({
                                type : "post",
                                url : "http://niushop.com/index.php/admin/goods/getGoodsBrandList",
                                data : { "page_index" : page_index, "page_size" : page_size, "brand_name" : brand_name, "search_name" : search_name, "brand_id" : $("#hidden_goods_brand_id").val() },
                                success : function(res){
                                    var html = '<option value="0">请选择商品品牌</option>';
                                    //如果当前是编辑商品状态，则检测是否有品牌
                                    if($("#hidden_goods_brand_name").val()){
                                        html += '<option value="' + $("#hidden_goods_brand_id").val() + '" selected="selected">' + $("#hidden_goods_brand_name").val() + '</option>';
                                    }
                                    if(res.total_count>0){
                                        for(var i=0;i<res['data'].length;i++){
                                            html += '<option value="' + res['data'][i].brand_id + '">' + res['data'][i].brand_name + '</option>';
                                        }
                                    }
                                    $("#brand_id").html(html);
                                    //更新搜索结果
                                    $(".js-brand-block .searchable-select-items .searchable-select-item").remove();
                                    curr_searchable_select.buildItems();
                                }
                            });
                        }

                        //添加阶梯优惠
                        $(".add_ladder_preference").click(function(){
                            var laddre_length = $(".ladder_preference_content .ladder_preference").length;
                            var html = '<div class="ladder_preference">';
                            html += '<input type="number" class="input-common short ladder" value="0">';
                            html += '<input type="number" class="input-common short preference" value="0">';
                            html += '<a href="javascript:;" class="delete_preference">删除</a></div>';
                            var prev_obj = $("#ladder_preference").prev();
                            if(laddre_length <= 9){
                                if(prev_obj.find(".ladder").val() != undefined &&　prev_obj.find(".preference").val() != undefined){
                                    if(prev_obj.find(".ladder").val() == 0 || prev_obj.find(".preference").val() == 0){
                                        showTip("请输入数量和优惠价格","warning");
                                    }else{
                                        $("#ladder_preference").before(html);
                                    }
                                }else{
                                    $("#ladder_preference").before(html);
                                }
                            }
                        })

                        $(".ladder_preference_content .ladder_preference .delete_preference").live("click",function(){
                            $(this).parent().remove();
                        });

                        /**
                         * 删除已选择的视频
                         */
                        function del_video(event){

                            // 通过ajax用php删除文件
                            var src = $("#video_url").val();
                            if(src!= ""){


                                var video = 'my-video';
                                var myPlayer = videojs(video);

                                videojs(video).ready(function(){

                                    var myPlayer = this;
// 			myPlayer.src('');
// 			myPlayer.load('');
                                    myPlayer.pause();

                                });


                                $("#my-video").attr('src', "");
// 		$("#my-video").attr('poster','/static/blue/img/vs.png');
                                $("#videoupload").val('');
// 		$(".del-video").hide();
                                $("#video_url").val('');
                                /* $.ajax({
                                    type : "post",
                                    url : "http://niushop.com/index.php/admin/goods/delSelectedVideo",
                                    data : {
                                        'src':src,
                                    },
                                    success : function(res){
                                        //console.log(res);
                                    }
                                }); */
                            }
// 	event.stopPropagation();
                        }
                        $(window).scroll(function(){
                            var srcoll_top = $(window).scrollTop();
                            $(".goods-nav.fixed").css("max-width",($(".ncsc-form-goods").width() - 5)+'px');
                            if(srcoll_top > 50 && $(".ns-main").height() > 1000){
                                $(".goods-nav").addClass('fixed');
                            }else{
                                $(".goods-nav").removeClass('fixed');
                            }
                        })

                        $(".decimal_reservation_number").click(function(){
                            $(this).siblings().find("i").removeClass("selected").find("input[type='checkbox']").prop('checked', false);
                        })
                    </script>

                    <script type="text/javascript" src="/static/js/jquery.cookie.js"></script>
                    <script src="/static/js/page.js"></script>
                    <div class="page" id="turn-ul" style="display: none;">
                        <div class="pagination">
                            <ul>
                                <li class="according-number">每页显示<input type="text" class="input-medium" id="showNumber" value="14" data-default="14" autocomplete="off"/>条</li>
                                <li><a id="beginPage" class="page-disable" style="border: 1px solid #dddddd;">首页</a></li>
                                <li><a id="prevPage" class="page-disable">上一页</a></li>
                                <li id="pageNumber"></li>
                                <li id="JslastPage">

                                </li>
                                <li><a id="nextPage">下一页</a></li>
                                <li><a id="lastPage">末页</a></li>
                                <li class="total-data">共0条</li>
                                <!-- <li class="page-count">共0页</li> -->
                                <li class="according-number">
                                    跳<input type="text" class="input-medium"  id="skipPage" data-curr-page="1"/>页
                                </li>
                            </ul>
                        </div>
                    </div>
                    <input type="hidden" id="page_count" />
                    <input type="hidden" id="page_size" />
                    <script>
                        /**
                         * 保存当前的页面
                         * 创建时间：2017年8月30日 19:29:20
                         */
                        function savePage(index){
                            var json = { page_index : index, show_number : $("#showNumber").val(), url :  window.location.href };
                            $.cookie('page_cookie',JSON.stringify(json),{ path: '/' });
                            //console.log(json);
                        }

                        $(function() {
                            try{

                                $("#turn-ul").show();//显示分页
                                var history_url = "";
                                var json = { page_index : 1, show_number : 14, url :  window.location.href };
                                var history_json = "";//用于临时保存分页数据
                                if($.cookie('page_cookie') != undefined && $.cookie('page_cookie') != "" && $.cookie('page_cookie') != '""'){

                                    var cookie = eval("(" + $.cookie('page_cookie') + ")");
                                    if(cookie !=undefined && cookie != ""){
                                        json.page_index = cookie.page_index;
                                        if(cookie.show_number != undefined && cookie.show_number != "") json.show_number = cookie.show_number;
                                        else json.show_number = 14;
                                        history_url = cookie.url;
                                        history_json = cookie;
                                    }

                                }else{

                                    savePage(json.page_index);

                                }
                                if(history_url != undefined && history_url != "" && history_url != json.url && json.page_index != 1){

                                    //如果页面发生了跳转，还原操作
                                    json.page_index = 1;
                                    json.show_number = 14;
                                    json.url = history_url;
                                    //console.log("如果页面发生了跳转，还原操作");
                                    $.cookie('page_cookie',JSON.stringify(json),{ path: '/' });
                                }

                                //console.log($.cookie('page_cookie'));
                                $("#showNumber").val(json.show_number);
                                if(json.page_index != 1) jumpNumber = json.page_index;
                                LoadingInfo(json.page_index);//通过此方法调用分页类

                            }catch(e){

                                $("#turn-ul").hide();
                                //当前页面没有分页，进行还原操作
                                $.cookie('page_cookie',JSON.stringify(history_json),{ path: '/' });
//		console.error(e);
                                //console.log("当前页面没有分页，进行还原操作");
                                //console.log($.cookie('page_cookie'));
                            }

                            //首页
                            $("#beginPage").click(function() {
                                if(jumpNumber!=1){
                                    jumpNumber = 1;
                                    LoadingInfo(1);
                                    savePage(1);
                                    changeClass("begin");
                                }
                                return false;
                            });

                            //上一页
                            $("#prevPage").click(function() {
                                var obj = $(".currentPage");
                                var index = parseInt(obj.text()) - 1;
                                if (index > 0) {
                                    obj.removeClass("currentPage");
                                    obj.prev().addClass("currentPage");
                                    jumpNumber = index;
                                    LoadingInfo(index);
                                    savePage(index);
                                    //判断是否是第一页
                                    if (index == 1) {
                                        changeClass("prev");
                                    } else {
                                        changeClass();
                                    }
                                }
                                return false;
                            });

                            //下一页
                            $("#nextPage").click(function() {
                                var obj = $(".currentPage");
                                //当前页加一（下一页）
                                var index = parseInt(obj.text()) + 1;
                                if (index <= $("#page_count").val()) {
                                    jumpNumber = index;
                                    LoadingInfo(index);
                                    savePage(index);
                                    obj.removeClass("currentPage");
                                    obj.next().addClass("currentPage");
                                    //判断是否是最后一页
                                    if (index == $("#page_count").val()) {
                                        changeClass("next");
                                    } else {
                                        changeClass();
                                    }
                                }
                                return false;
                            });

                            //末页
                            $("#lastPage").click(function() {
                                jumpNumber = $("#page_count").val();
                                if(jumpNumber>1){
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    $("#pageNumber a:eq("+ (parseInt($("#page_count").val()) - 1) + ")").text($("#page_count").val());
                                    changeClass("next");
                                }
                                return false;
                            });

                            //每页显示页数
                            $("#showNumber").blur(function(){
                                if(isNaN($(this).val())){
                                    $("#showNumber").val(20);
                                    jumpNumber = 1;
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    return;
                                }
                                if($(this).val().indexOf(".") != -1){
                                    var index = $(this).val().indexOf(".");
                                    $("#showNumber").val($(this).val().substr(0,index));
                                    jumpNumber = 1;
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    return;
                                }
                                if(parseInt($(this).val())<=0){
                                    jumpNumber = 1;
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    return;
                                }
                                //页数没有变化的话，就不要再执行查询
                                if(parseInt($(this).val()) != $(this).attr("data-default")){
// 			jumpNumber = 1;//设置每页显示的页数，并且设置到第一页
                                    $(this).attr("data-default",$(this).val());
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                }
                                return false;
                            }).keyup(function(event){
                                if(event.keyCode == 13){
                                    if(isNaN($(this).val())){
                                        $("#showNumber").val(20);
                                        jumpNumber = 1;
                                        LoadingInfo(jumpNumber);
                                        savePage(jumpNumber);
                                    }
                                    //页数没有变化的话，就不要再执行查询
                                    if(parseInt($(this).val()) != $(this).attr("data-default")){
// 				jumpNumber = 1;//设置每页显示的页数，并且设置到第一页
                                        $(this).attr("data-default",$(this).val());
                                        //总数据数量
                                        var total_count = parseInt($(".total-data").attr("data-total-count"));
                                        //计算用户输入的页数是否超过当前页数
                                        var curr_count = Math.ceil(total_count/parseInt($(this).val()));
                                        if( curr_count !=0 && curr_count < jumpNumber){
                                            jumpNumber = curr_count;//输入的页数超过了，没有那么多
                                        }
                                        LoadingInfo(jumpNumber);
                                        savePage(jumpNumber);
                                    }
                                }
                                return false;
                            });

                            // 跳转到某页
                            $("#skipPage").blur(function(){
                                if(isNaN($(this).val()) || $(this).val().length == 0){
                                    $("#showNumber").val(20);
                                    jumpNumber = 1;
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    return;
                                }
                                if(parseInt($(this).val())<=0){
                                    jumpNumber = 1;
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    return;
                                }
                                if(parseInt($(this).val()) > $("#page_count").val()){
                                    jumpNumber = $("#page_count").val();
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                    $(this).val(jumpNumber);
                                    return;
                                }
                                if(parseInt($(this).val()) == parseInt($(this).attr("data-curr-page"))){
                                    return;
                                }
                                jumpNumber = $(this).val();
                                LoadingInfo(jumpNumber);
                                savePage(jumpNumber);
                            }).keyup(function(event){
                                if(event.keyCode == 13){
                                    if(isNaN($(this).val())){
                                        $("#showNumber").val(20);
                                        jumpNumber = 1;
                                        LoadingInfo(jumpNumber);
                                        savePage(jumpNumber);
                                    }
                                    if(parseInt($(this).val())<=0){
                                        jumpNumber = 1;
                                        LoadingInfo(jumpNumber);
                                        savePage(jumpNumber);
                                        return;
                                    }
                                    if(parseInt($(this).val()) > $("#page_count").val()){
                                        jumpNumber = $("#page_count").val();
                                        LoadingInfo(jumpNumber);
                                        savePage(jumpNumber);
                                        $(this).val(jumpNumber);
                                        return;
                                    }
                                    if(parseInt($(this).val()) == parseInt($(this).attr("data-curr-page"))){
                                        return;
                                    }
                                    jumpNumber = $(this).val();
                                    LoadingInfo(jumpNumber);
                                    savePage(jumpNumber);
                                }
                                return false;
                            });
                        });

                        //跳转页面
                        function JumpForPage(obj) {
                            jumpNumber = $(obj).text();
                            LoadingInfo($(obj).text());
                            savePage($(obj).text());
                            $(".currentPage").removeClass("currentPage");
                            $(obj).addClass("currentPage");
                            if (jumpNumber == 1) {
                                changeClass("prev");
                            } else if (jumpNumber < parseInt($("#page_count").val())) {
                                changeClass();
                            } else if (jumpNumber == parseInt($("#page_count").val())) {
                                changeClass("next");
                            }
                        }
                    </script>
                </div>

</section>